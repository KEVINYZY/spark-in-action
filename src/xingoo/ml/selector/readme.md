
# vectorSlicer

vectorslicer可以根据原始的特征，获得子集特征。常用于从特征列里面选择特征。

vectorslicer接收一个向量的列名索引，然后输出成一个新的向量。

接收两种数据类型：

- 数值型，是向量索引的下标
- 通过setName()设置索引对应的名称，也可以单独选择名称

如果填写的列名重复，是不允许的；如果列名对应的列为空，会直接抛出异常。

# RFormula

RFormular是模仿r公式推出的特征选择的方法，可以直接从原始的label生成特征。

常用的符号有：

- ～ 分割tag和feautre
- + 
- -
- ： 乘法
- . 所有的列

比如：

- y ~ a + b  可以立即成 y ~ w0 + w1 * a + w2 * b
- y ~ a + b + a:b - 1 可以理解成 y ~ w1 * a + w2 * b + w3 * a * b

特征在处理的时候，文本会转成onehot，数值会保留，直接拼接

# ChiSqSelector

卡方检验即判断特征与结果的相关性，如果相关性高，独立性小，说明特征对结果有影响；如果独立性大，说明特征对结果没什么影响，可以忽略掉。

卡方检验利用假设检验的思想——通过观察实际值和理论值的偏差 确定 原假设是否成立。

MLLib提供了多种计算方法：

- numTopFeature，选择固定个最相关的特征
- percentile，效果差不多，选择的个数是按照百分比来的
- fpr，是通过选择p阈值
- ....

大致的原理就是，选择每个特征与label组成（特征、label），然后计算卡方值（P值）
按照P值从小到大排序，保留下p值越小的。
因为p值越小，证明独立性越低，即相关性越高。
